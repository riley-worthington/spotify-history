{"ast":null,"code":"var _jsxFileName = \"/Users/rileyworthington/projects/spotify-history/client/src/App.js\";\nimport React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport format from 'date-fns/format';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    const urlParams = new URLSearchParams(window.location.search);\n    const isUserAuthorized = urlParams.has('authorized') ? true : false;\n    this.state = {\n      isUserAuthorized,\n      musicHistory: []\n    };\n  }\n\n  componentDidMount() {\n    const isUserAuthorized = this.state.isUserAuthorized;\n\n    if (isUserAuthorized) {\n      fetch('http://localhost:5000/history').then(res => res.json()).then(data => {\n        this.setState({\n          musicHistory: data\n        });\n      }).catch(error => console.log(error));\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          isUserAuthorized = _this$state.isUserAuthorized,\n          musicHistory = _this$state.musicHistory;\n    const connectSpotify = isUserAuthorized ? '' : React.createElement(\"a\", {\n      href: \"http://localhost:5000/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Connect your Spotify account\");\n\n    const TableItem = (item, index) => React.createElement(\"tr\", {\n      key: item.played_at,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, index + 1), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, item.track_name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, format(item.played_at, 'D MMM YYYY, hh:mma')));\n\n    const RecentlyPlayed = () => React.createElement(\"div\", {\n      className: \"recently-played\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Recent Tracks\"), React.createElement(\"table\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"#\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Song title\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Time\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, musicHistory.map((e, index) => TableItem(e, index)))));\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Spotify Listening History\"), connectSpotify, musicHistory.length !== 0 ? React.createElement(RecentlyPlayed, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }) : null));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/rileyworthington/projects/spotify-history/client/src/App.js"],"names":["React","Component","Pusher","format","App","constructor","urlParams","URLSearchParams","window","location","search","isUserAuthorized","has","state","musicHistory","componentDidMount","fetch","then","res","json","data","setState","catch","error","console","log","render","connectSpotify","TableItem","item","index","played_at","track_name","RecentlyPlayed","map","e","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport format from 'date-fns/format';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    const urlParams = new URLSearchParams(window.location.search);\n    const isUserAuthorized = urlParams.has('authorized') ? true : false;\n\n    this.state = {\n      isUserAuthorized,\n      musicHistory: [],\n    };\n  }\n\n  componentDidMount() {\n    const { isUserAuthorized } = this.state;\n\n    if (isUserAuthorized) {\n      fetch('http://localhost:5000/history')\n        .then(res => res.json())\n        .then(data => {\n          this.setState({\n            musicHistory: data,\n          });\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n  render() {\n    const { isUserAuthorized, musicHistory } = this.state;\n    const connectSpotify = isUserAuthorized ? (\n      ''\n    ) : (\n      <a href='http://localhost:5000/login'>Connect your Spotify account</a>\n    );\n\n    const TableItem = (item, index) => (\n      <tr key={item.played_at}>\n        <td>{index + 1}</td>\n        <td>{item.track_name}</td>\n        <td>{format(item.played_at, 'D MMM YYYY, hh:mma')}</td>\n      </tr>\n    );\n\n    const RecentlyPlayed = () => (\n      <div className='recently-played'>\n        <h2>Recent Tracks</h2>\n        <table className='table'>\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>Song title</th>\n              <th>Time</th>\n            </tr>\n          </thead>\n          <tbody>{musicHistory.map((e, index) => TableItem(e, index))}</tbody>\n        </table>\n      </div>\n    );\n\n    return (\n      <div className='App'>\n        <header className='header'>\n          <h1>Spotify Listening History</h1>\n          {connectSpotify}\n          {musicHistory.length !== 0 ? <RecentlyPlayed /> : null}\n        </header>\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}